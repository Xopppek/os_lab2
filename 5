#include <stdio.h> 
#include <unistd.h>
#include <sys/types.h>
#include <stdlib.h>
#include <signal.h>
#include <string.h>

#define MAX_ARGS 20
#define MAX_PROGS 10
#define MAX_ARG_LENGTH 20
#define MAX_PROG_LENGTH 50
#define INPUT_SIZE 1024 
int main(){ 
/*	char input[100];
	fgets(input, 100, stdin);
	kill(getppid(), SIGUSR1);
	printf("b sent signal to %d\n", getppid());
	system(input);*/
	
	char input[INPUT_SIZE];
	char args[MAX_PROGS][MAX_ARGS][MAX_ARG_LENGTH];
	char programs[MAX_PROGS][MAX_PROG_LENGTH];/btw string like name arg1 arg2...
	char* token;
	char* space_token;

	printf("Program B is waiting for input:\n");
	fgets(input, INPUT_SIZE, stdin);

//=================Parsing================//

	int num_programs = 0;
	int num_args[MAX_PROGS] = {0};
	int i = 0, j = 0;

	token = strtok(input, "|\n");

	while(token != NULL && num_programs < MAX_PROGS){
		strncpy(programs[num_programs], token, MAX_PROG_LENGTH);
		num_programs++;
//		token = strtok(NULL, " ");
		token = strtok(NULL, "|\n");
	}
	
	for (i = 0; i < num_programs; i++){
		printf("prog %d %s\n", i, programs[i]);
	}



	exit(0);
} 
